p8105\_hw2\_tj2383
================
Tanvi Jain
9/25/2018

Problem 1
---------

Read in and clean the transit dataset:

``` r
transit_data = read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", col_types = "cccddcccccccccccccccccccccccddcc") %>% 
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>%
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

According to the cleaning code chunk, this dataset was first imported using the read\_csv statement. I then cleaned the variable names so that they were converted to lower case and the snake format, this makes the variables easy to use while coding. I further cleaned the dataset by selecting key variables to include in the dataset; line, station name, station latitude, station longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance\_type, and ada. Lastly, I changed the "entry" variable from a character variable to a logical variable. The dimensions of this dataset are 1868, 19. This dataset is still not tidy. For example, there are several "route" variables that could be consolidated.

The following were conducted in this code chunk: -How many distinct stations are there? -How many stations are ADA compliant? -What proportion of station entrances / exits without vending allow entrance? -Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? How many are ADA compliant?

``` r
transit_data %>% 
  distinct(line, station_name) 
```

    ## # A tibble: 465 x 2
    ##    line     station_name            
    ##    <chr>    <chr>                   
    ##  1 4 Avenue 25th St                 
    ##  2 4 Avenue 36th St                 
    ##  3 4 Avenue 45th St                 
    ##  4 4 Avenue 53rd St                 
    ##  5 4 Avenue 59th St                 
    ##  6 4 Avenue 77th St                 
    ##  7 4 Avenue 86th St                 
    ##  8 4 Avenue 95th St                 
    ##  9 4 Avenue 9th St                  
    ## 10 4 Avenue Atlantic Av-Barclays Ctr
    ## # ... with 455 more rows

``` r
select(transit_data, line, station_name, ada) %>% 
  filter(ada == "TRUE") %>% 
  distinct(line, station_name, ada)
```

    ## # A tibble: 84 x 3
    ##    line            station_name                   ada  
    ##    <chr>           <chr>                          <chr>
    ##  1 4 Avenue        Atlantic Av-Barclays Ctr       TRUE 
    ##  2 4 Avenue        DeKalb Av                      TRUE 
    ##  3 4 Avenue        Pacific St                     TRUE 
    ##  4 42nd St Shuttle Grand Central                  TRUE 
    ##  5 6 Avenue        34th St                        TRUE 
    ##  6 6 Avenue        47-50th Sts Rockefeller Center TRUE 
    ##  7 6 Avenue        Church Av                      TRUE 
    ##  8 63rd Street     21st St                        TRUE 
    ##  9 63rd Street     Lexington Av                   TRUE 
    ## 10 63rd Street     Roosevelt Island               TRUE 
    ## # ... with 74 more rows

``` r
select(transit_data, entry, vending) %>% 
  filter(vending == "NO") %>% 
  summarize(mean(entry))
```

    ## # A tibble: 1 x 1
    ##   `mean(entry)`
    ##           <dbl>
    ## 1         0.377

According to the problem1\_q code chunk, there are 465 distinct stations. There are 84 ADA compliant stations. The proportion of station entrace/exits with no vending are 0.3770492.

In this code chunk reformatted data so that route number and route name are distinct variables. Then I calculated the number of distinct stations serve the A train and how many of them are ADA compliant.

``` r
reformat_transit_data = 
  transit_data %>% 
  gather(key = route_number, value = route_name, route1:route11)

select(reformat_transit_data, route_name, station_name, line) %>% 
  filter(route_name == "A") %>% 
  distinct(line, station_name)
```

    ## # A tibble: 60 x 2
    ##    station_name                  line           
    ##    <chr>                         <chr>          
    ##  1 Times Square                  42nd St Shuttle
    ##  2 125th St                      8 Avenue       
    ##  3 145th St                      8 Avenue       
    ##  4 14th St                       8 Avenue       
    ##  5 168th St - Washington Heights 8 Avenue       
    ##  6 175th St                      8 Avenue       
    ##  7 181st St                      8 Avenue       
    ##  8 190th St                      8 Avenue       
    ##  9 34th St                       8 Avenue       
    ## 10 42nd St                       8 Avenue       
    ## # ... with 50 more rows

``` r
select(reformat_transit_data, route_name, station_name, line, ada) %>% 
  filter(route_name == "A", ada == "TRUE") %>% 
  distinct(line, station_name)
```

    ## # A tibble: 17 x 2
    ##    station_name                  line            
    ##    <chr>                         <chr>           
    ##  1 14th St                       8 Avenue        
    ##  2 168th St - Washington Heights 8 Avenue        
    ##  3 175th St                      8 Avenue        
    ##  4 34th St                       8 Avenue        
    ##  5 42nd St                       8 Avenue        
    ##  6 59th St                       8 Avenue        
    ##  7 Inwood - 207th St             8 Avenue        
    ##  8 West 4th St                   8 Avenue        
    ##  9 World Trade Center            8 Avenue        
    ## 10 Times Square-42nd St          Broadway        
    ## 11 59th St-Columbus Circle       Broadway-7th Ave
    ## 12 Times Square                  Broadway-7th Ave
    ## 13 8th Av                        Canarsie        
    ## 14 Franklin Av                   Franklin        
    ## 15 Euclid Av                     Fulton          
    ## 16 Franklin Av                   Fulton          
    ## 17 Howard Beach                  Rockaway

There are 60 distinct stations that serve the A train. 17 of these stations are ADA compliant.

Problem 2
---------

Read in and clean the Mr.Trash Wheel dataset

``` r
trashwheel_data = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2017-3.xlsx", "Mr. Trash Wheel", range = cellranger::cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(sports_balls = as.integer(round(sports_balls)))
```

Read in and clean 2016 and 2017 Precipitation dataset

``` r
precipitation16_data = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2017-3.xlsx", "2016 Precipitation", range = cellranger::cell_cols("A:B")) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(precipitation_in) & precipitation_in != ("Month")) %>% 
  add_column(year = "2016")

precipitation17_data = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2017-3.xlsx", "2017 Precipitation", range = cellranger::cell_cols("A:B")) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(precipitation_in) & !is.na(x_1) & precipitation_in != ("Month")) %>% 
  add_column(year = "2017")

precipitation_16_17_data = bind_rows(precipitation16_data, precipitation17_data) %>% 
  mutate(precipitation_in = month.name[as.integer(precipitation_in)])
```
